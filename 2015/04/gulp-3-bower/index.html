<!DOCTYPE html><html><head><title>Gulp Tutorial 3 - Bower | Giorgio Lasala Blog</title><meta charset="utf-8" /><meta http-equiv="content-type" content="text/html; charset=utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="description" content="Giorgio Lasala Blog" /><meta name="keywords" content="Giorgio" /><meta name="author" content="Giorgio Lasala" /><meta name="generator" content="DocPad v6.78.6" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="google-site-verification" content="7qBn2ADQE0AjoYPTvti8tvHvCjvmpn-G4A0Asm7jnMs" /><link rel="shortcut icon" href="/ico/favicon.ico" /><!--[if lt IE 9]><script async="async" src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--><link  rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" /><link  rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,700" /><link  rel="stylesheet" href="http://fonts.googleapis.com/css?family=Niconne" /><link  rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/vs.min.css" /><link  rel="stylesheet" href="/css/jquery.cssemoticons.css" /><link  rel="stylesheet" href="/css/font-awesome.min.css" /><link  rel="stylesheet" href="/css/style.css" /><meta property="og:locale" content="it_IT" /><meta property="og:type" content="article" /><meta property="og:title" content="Gulp Tutorial 3 - Bower" /><meta property="og:description" content="Giorgio Lasala Blog" /><meta property="og:url" content="http://www.giorgiolasala.it/2015/04/gulp-3-bower/" /><meta property="og:site_name" content="Giorgio Lasala Blog" /><meta property="og:image" content="" /><meta property="article:author" content="Giorgio Lasala" /><meta property="article:publisher" content="Giorgio Lasala" /><meta property="article:tag" content="Gulp" /><script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37168832-1', 'auto');
  ga('send', 'pageview');

</script></head><body><div id="bodyWrapper"><div><header id="siteHeader" class="img-responsive" style="background-image: url(/images/template/dynamo.jpg);"><div><div class="navbar navbar-default navbar-fixed-top navbar-inverse"><ul id="color-bars"><li id="color-1"></li><li id="color-2"></li><li id="color-3"></li><li id="color-4"></li><li id="color-5"></li><li id="color-6"></li></ul><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Home</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li typeof="sioc:Page" about="/pages/all-posts/"><a href="/pages/all-posts/" property="dc:title">Archivio</a></li><li typeof="sioc:Page" about="/pages/all-tags/"><a href="/pages/all-tags/" property="dc:title">Tags</a></li><li typeof="sioc:Page" about="/pages/tools/"><a href="/pages/tools/" property="dc:title">Tools</a></li><li typeof="sioc:Page" about="/pages/about-me/"><a href="/pages/about-me/" property="dc:title">Chi sono</a></li></ul></div></div></div></div><div class="jumbotron"><div class="container"><h1>Giorgio Lasala Blog</h1><span class="headerArrow"></span></div></div></header></div><div id="contentBody" class="container" role="main"><article id="post" class="post"><div id="post-head"><div class="title-container"><h1>Gulp Tutorial 3 - Bower</h1></div><div class="date text-muted text-right">28 aprile 2015</div></div><div class="clear"></div><div id="tags"><div class="tag_item"><a href="/tags/gulp">Gulp</a></div></div><div id="summary"><ul><li><a href="/2015/04/gulp-1-start/">Gulp Tutorial 1 - Si comincia!</a></li><li><a href="/2015/05/gulp-2-plugins/">Gulp Tutorial 2 - Plugins</a></li><li><span>Gulp Tutorial 3 - Bower</span></li></ul></div><div><p>E&#39; arrivato il momento di <strong>Bower</strong>! </p>
<p><div style="text-align:center"><img src="/images/2015/bower-300.png" alt=""></div>
<!-- more --> 
Aggiungiamo i packages:</p>
<pre class="highlight"><code class="hljs 1c">    <span class="hljs-string">"devDependencies"</span>: {
        <span class="hljs-string">"gulp-bower"</span>: <span class="hljs-string">"^0.0.10"</span>,
        <span class="hljs-string">"main-bower-files"</span>: <span class="hljs-string">"~2.5.0"</span>
    }
</code></pre><p>in particolare:</p>
<ul>
<li><strong>gulp-bower</strong> ci permette di integrare Bower all&#39;interno dei task, senza eseguirlo separatamente da riga di comando</li>
<li><strong>main-bower-files</strong> ci consente di copiare solamente gli artifacts (js/css) e non tutto il contenuto scaricato da Bower</li>
</ul>
<p>Ricordandosi che <em>gulp-bower</em> lo ritroviamo tra i <em>plugins</em>, procediamo con istanziare solamente la variabile <em>mainBowerFiles</em>:</p>
<pre class="highlight"><code class="hljs coffeescript"><span class="hljs-reserved">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>),
    mainBowerFiles = <span class="hljs-built_in">require</span>(<span class="hljs-string">'main-bower-files'</span>);
</code></pre><p>e realizziamo i nostri nuovi task:</p>
<pre class="highlight"><code class="hljs actionscript"><span class="hljs-comment">// Installazione dei package Bower </span>
gulp.task(<span class="hljs-string">'bower:install'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{  
    <span class="hljs-keyword">return</span> plugins.bower();
});


<span class="hljs-comment">// Javascript</span>
gulp.task(<span class="hljs-string">'js'</span>, [<span class="hljs-string">'bower:install'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{    
    gulp.src(mainBowerFiles())
        .pipe(gulp.dest(<span class="hljs-string">'wwwroot/lib'</span>));
});
</code></pre><p>Il primo task <strong>bower:install</strong> si occupa di scaricare i package client-side definiti all&#39;interno del file bower.json (es. jquery, bootstrap, angularJs); il secondo invece preleva i file principali dei package e li copia attraverso la funzione <strong>dest</strong> nella directory di output.</p>
<p>Nel secondo task possiamo notare che c&#39;è un parametro in più tra parentesi quadre; questo indica che il task <em>js</em> dipende da <em>bower:install</em>. Gulp eseguirà quindi prima <em>bower:install</em> e al termine, se tutto è andato correttamente, il task <em>js</em>.</p>
<p>Se andiamo ora a vedere il risultato nella cartella <em>&#39;wwwroot/lib&#39;</em> troveremo tutti i file principali dei package. Bello si, ma alla fine abbiamo scritto un po&#39; di codice e ci siamo ritrovati niente di più che i file scaricati da Internet in una determinata cartella.</p>
<p>Proviamo a modificare leggermente il task <em>js</em> in questo modo:</p>
<pre class="highlight"><code class="hljs perl">gulp.task(<span class="hljs-string">'js'</span>, [<span class="hljs-string">'bower:install'</span>], function () {    
    gulp.src(mainBowerFiles())
        .<span class="hljs-keyword">pipe</span>(plugins.filter(<span class="hljs-string">'*.js'</span>))
        .<span class="hljs-keyword">pipe</span>(plugins.concat(<span class="hljs-string">'vendor.js'</span>))
        .<span class="hljs-keyword">pipe</span>(plugins.uglify())
        .<span class="hljs-keyword">pipe</span>(plugins.<span class="hljs-keyword">rename</span>({
            suffix: <span class="hljs-string">".min"</span>
        }))
        .<span class="hljs-keyword">pipe</span>(gulp.dest(<span class="hljs-string">'wwwroot/lib'</span>));
});
</code></pre><p>e dopo aver avviato il task ci troviamo il file <em>vendor.min.js</em> nella cartella di output, che contiene tutti i file minificati e concatenati! La cosa interessante è che se un giorno decideremo di aggiungere una nuova libreria, basterà inserire l&#39;opportuno riferimento nel file <em>bower.json</em>... al resto ci penserà Gulp!</p>
<p>Nel dettaglio il precedente task non fa altro che:</p>
<ol>
<li>Prelevare i file di Bower</li>
<li>Filtrare solamente i JS (escludiamo i CSS)</li>
<li>Concatenarli in un unico file chiamato <em>vendor.js</em></li>
<li>Minificarli</li>
<li>Aggiungere il prefisso min</li>
<li>Spostarli nella directory di output</li>
</ol>
<p>tutto questo lavorando con gli stream!</p>
<p>Ora ci basterà aggiungere il riferimento allo script generato nella View di ASP.NET MVC e il gioco è fatto!</p>
<p><a href="https://github.com/salem84/AngularTsMvcWebApp/tree/3aaf33fe8716ae14dfb16399fabdbac1fddf86eb">Visualizza codice</a></p>
</div><div></div><div class="addthis_native_toolbox"></div><div id="disqus"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments.</a></noscript></div>
<script type="text/javascript">
    var disqus_shortname = 'giorgiolasala';
    var disqus_url = 'http://www.giorgiolasala.it/2015/04/gulp-3-bower/';
    var disqus_identifier = disqus_url;
    var disqus_title = 'Gulp Tutorial 3 - Bower';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script></div></article></div><footer id="footer" class="text-right"><div id="copyright"><span>Giorgio Lasala Blog © 2014. All Rights Reserved. Powered by </span><a href="https://docpad.org" target="_blank">DocPad</a></div></footer></div><script defer="defer"  src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script><script defer="defer"  src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script defer="defer"  src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script><script defer="defer"  src="/scripts/jquery.cssemoticons.min.js"></script><script defer="defer"  src="/scripts/jquery.tagcanvas.js"></script><script defer="defer"  src="/scripts/app.js"></script><script type="text/javascript" >
	/*WebFontConfig = {
		google: {
		  families: [
			'Nosifer::latin'
		  ]
		},
	active: function() {
	  alert('aaaa');
	}
  };*/
</script>

<script type="text/javascript">
    window.appInsights={queue:[],applicationInsightsId:null,accountId:null,appUserId:null,configUrl:null,start:function(n){function u(n){t[n]=function(){var i=arguments;t.queue.push(function(){t[n].apply(t,i)})}}function f(n,t){if(n){var u=r.createElement(i);u.type="text/javascript";u.src=n;u.async=!0;u.onload=t;u.onerror=t;r.getElementsByTagName(i)[0].parentNode.appendChild(u)}else t()}var r=document,t=this,i;t.applicationInsightsId=n;u("logEvent");u("logPageView");i="script";f(t.configUrl,function(){f("//az416426.vo.msecnd.net/scripts/v/ai.0.7.js")});t.start=function(){}}};
    
    appInsights.start("b381f6b5-ab80-4f42-89be-e2f8995b2dd2");
    appInsights.logPageView();
</script>

<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-54a5802d1314629a" async="async"></script>
</body></html>